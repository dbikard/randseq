# Utils


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

------------------------------------------------------------------------

<a
href="https://github.com/dbikard/randseq/blob/main/randseq/utils.py#L25"
target="_blank" style="float:right; font-size:smaller">source</a>

### calculate_log2fc

>  calculate_log2fc (df, reference_column='MFDpir', count_threshold=20,
>                        pseudocount=1)

\*Filters a DataFrame, normalizes columns by sum, calculates log2 fold
change relative to a reference column, and drops the reference column.

Args: df (pd.DataFrame): Input DataFrame (rows=features,
columns=samples). reference_column (str): Name of the reference sample
column. count_threshold (int): Minimum count in reference column to keep
a feature. pseudocount (float): Value added to normalized counts before
log2FC.

Returns: pd.DataFrame: DataFrame with log2 fold change values. None if
reference column is missing. Empty DataFrame if all rows are filtered
out.\*

``` python
counts_file="countsTable.csv"
file_path=os.path.join(data_path,counts_file)
counts=pd.read_csv(file_path, index_col=0)
counts = counts[[col for col in counts.columns if ("_T0" in col) or ("MFDpir" in col)]]

log2fc_df = calculate_log2fc(counts, reference_column='MFDpir', count_threshold=20, pseudocount=1)
log2fc_df.min(axis=0)
```

    K12_T0       -2.844874
    HS_T0        -3.320280
    E1114_T0     -4.544421
    E1167_T0     -3.645600
    H120_T0      -3.572726
    TA054_T0     -3.319211
    TA447_T0     -3.566876
    E101_T0      -8.108167
    41-1Ti9_T0   -4.255918
    TA280_T0     -4.800802
    M114_T0      -4.143357
    TA249_T0     -4.973009
    ROAR8_T0     -4.621302
    JJ1886_T0    -9.188692
    CFT073_T0    -3.868714
    APECO1_T0    -6.525634
    UTI89_T0     -8.571068
    S88_T0       -8.601767
    MG1655_T0    -4.777041
    dtype: float64

------------------------------------------------------------------------

<a
href="https://github.com/dbikard/randseq/blob/main/randseq/utils.py#L88"
target="_blank" style="float:right; font-size:smaller">source</a>

### revcomp

>  revcomp (seq:str)

*Computes the reverse complement of a sequence*

``` python
assert revcomp("ATGC")=="GCAT"
assert revcomp("ATGCN")=="NGCAT"
assert revcomp("atgNN")=="NNCAT"
```

------------------------------------------------------------------------

<a
href="https://github.com/dbikard/randseq/blob/main/randseq/utils.py#L95"
target="_blank" style="float:right; font-size:smaller">source</a>

### allseqs

>  allseqs (n, seqs=[''])

*Recursive function that generates all possible sequences of length n
seqs is a list of sequences to which we will add bases*

``` python
",".join(allseqs(2))
```

    'AA,AT,AG,AC,TA,TT,TG,TC,GA,GT,GG,GC,CA,CT,CG,CC'

``` python
assert flatten([[1,2],[3,4],[5,6]])==[1, 2, 3, 4, 5, 6]
```

------------------------------------------------------------------------

<a
href="https://github.com/dbikard/randseq/blob/main/randseq/utils.py#L109"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_all_sites

>  get_all_sites (pattern)

``` python
get_all_sites((3,6,4))[:5]
```

    ['AAANNNNNNAAAA',
     'AAANNNNNNAAAT',
     'AAANNNNNNAAAG',
     'AAANNNNNNAAAC',
     'AAANNNNNNAATA']
